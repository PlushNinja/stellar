- if megamenu.children_count > 0
  - if navmenu
    %li
      .navmenu-header
        = megamenu
        %span.caret
      %ul.nav.navmenu-nav
        - megamenu.children.live.each do |child|
          = render partial: child.to_partial_path, object: child, locals: {navmenu: true}
  - else
    %li.dropdown.mega-dropdown
      %a{data: {toggle: 'dropdown', target: "##{dom_id(megamenu, :menu)}"}, role: 'button'}
        = megamenu
        %span.caret

    - content_for :mega_dropdown_content do
      .dropdown-menu.mega-dropdown-menu{id: dom_id(megamenu, :menu), role: 'menu'}
        .container
          %ul.row
            - megamenu.children.live.each do |child|
              = render partial: child.to_partial_path, object: child, locals: {navmenu: false}
