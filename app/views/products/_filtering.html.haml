.product-filter-toggle
  %button.offcanvas-toggle{type: 'button', data: {toggle: 'offcanvas', target: '#filter-panel'}}
    = icon('filter', t('actions.filter'))

#filter-panel.offcanvas.navmenu.navmenu-default.navmenu-fixed-right{class: @filter_enabled && 'open'}
  .inner-wrap
    %button.offcanvas-toggle{type: 'button', data: {toggle: 'offcanvas', target: '#filter-panel'}}
      = icon('close')
    .filter-form
      = form_for @search, url: show_category_path(@category), method: :get, enforce_utf8: false, data: {push: true, target: '#store-body', 'include-blank-url-params': true, 'optimize-url-params': false}, html: {id: 'filter-form'} do |f|
        .form-group
          = f.search_field :keyword, autocomplete: 'off', placeholder: t('search_panel.keyword'), class: 'form-control'
        - current_store.searchable_properties.each do |property|
          .form-group
            = f.select property.sluggify, property.values.sort, {}, {multiple: true, placeholder: property.name.titleize, class: 'form-control'}

:coffee
  $('select', '#filter-form').selectize
    plugins: ['remove_button']
    dropdownParent: 'body'
    allowEmptyOption: true
  $('#filter-form').on 'change', (e) ->
    $(this).submit()
