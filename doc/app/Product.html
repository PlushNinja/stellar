<!DOCTYPE html>

<html>
<head>
<meta charset="utf-8">

<title>class Product - Rails Application Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
</script>

<script src="./js/jquery.js"></script>
<script src="./js/darkfish.js"></script>

<link href="./css/fonts.css" rel="stylesheet">
<link href="./css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="./index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="./table_of_contents.html#pages">Pages</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link">ActiveRecord::Base
  
</div>

    <div id="includes-section" class="nav-section">
  <h3>Included Modules</h3>

  <ul class="link-list">
  
  
    <li><span class="include">Authority::Abilities</span>
  
  
  
    <li><a class="include" href="Imageable.html">Imageable</a>
  
  
  
    <li><a class="include" href="Reorderable.html">Reorderable</a>
  
  
  
    <li><span class="include">FriendlyId</span>
  
  
  </ul>
</div>

    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-availability_options">::availability_options</a>
    
    <li ><a href="#method-c-purpose_options">::purpose_options</a>
    
    <li ><a href="#method-i-active_promoted_items">#active_promoted_items</a>
    
    <li ><a href="#method-i-available-3F">#available?</a>
    
    <li ><a href="#method-i-available_variant_options">#available_variant_options</a>
    
    <li ><a href="#method-i-base_unit">#base_unit</a>
    
    <li ><a href="#method-i-best_promoted_item">#best_promoted_item</a>
    
    <li ><a href="#method-i-category">#category</a>
    
    <li ><a href="#method-i-component_total_price_cents">#component_total_price_cents</a>
    
    <li ><a href="#method-i-distinct_properties">#distinct_properties</a>
    
    <li ><a href="#method-i-duplicate-21">#duplicate!</a>
    
    <li ><a href="#method-i-first_variant">#first_variant</a>
    
    <li ><a href="#method-i-icon">#icon</a>
    
    <li ><a href="#method-i-limelightable-3F">#limelightable?</a>
    
    <li ><a href="#method-i-margin_percent">#margin_percent</a>
    
    <li ><a href="#method-i-markup_percent">#markup_percent</a>
    
    <li ><a href="#method-i-master_product_options">#master_product_options</a>
    
    <li ><a href="#method-i-price_cents">#price_cents</a>
    
    <li ><a href="#method-i-price_range">#price_range</a>
    
    <li ><a href="#method-i-product_properties_hash">#product_properties_hash</a>
    
    <li ><a href="#method-i-real-3F">#real?</a>
    
    <li ><a href="#method-i-reset_code">#reset_code</a>
    
    <li ><a href="#method-i-reset_itself-21">#reset_itself!</a>
    
    <li ><a href="#method-i-reset_live_status-21">#reset_live_status!</a>
    
    <li ><a href="#method-i-searchable_product_properties">#searchable_product_properties</a>
    
    <li ><a href="#method-i-shipping_stock">#shipping_stock</a>
    
    <li class="calls-super" ><a href="#method-i-should_generate_new_friendly_id-3F">#should_generate_new_friendly_id?</a>
    
    <li ><a href="#method-i-sibling_variants">#sibling_variants</a>
    
    <li ><a href="#method-i-slugger">#slugger</a>
    
    <li ><a href="#method-i-to_s">#to_s</a>
    
    <li ><a href="#method-i-touch_categories">#touch_categories</a>
    
    <li ><a href="#method-i-undead-3F">#undead?</a>
    
    <li ><a href="#method-i-unique_properties">#unique_properties</a>
    
    <li ><a href="#method-i-unit_price_cents">#unit_price_cents</a>
    
    <li ><a href="#method-i-with_requisite_products">#with_requisite_products</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-Product">
  <h1 id="class-Product" class="class">
    class Product
  </h1>

  <section class="description">
    
  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    
    <section class="constants-list">
      <header>
        <h3>Constants</h3>
      </header>
      <dl>
      
        <dt id="INLINE_SEARCH_RESULTS">INLINE_SEARCH_RESULTS
        
        <dd>
        
      
        <dt id="PURPOSE_ICONS">PURPOSE_ICONS
        
        <dd>
        
      
      </dl>
    </section>
    

    
    <section class="attribute-method-details" class="method-section">
      <header>
        <h3>Attributes</h3>
      </header>

      
      <div id="attribute-i-requisite_ids_string" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">requisite_ids_string</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
    </section>
    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-availability_options" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">availability_options</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Options for a search form.</p>
          
          

          
          <div class="method-source-code" id="availability_options-source">
            <pre><span class="ruby-comment"># File app/models/product.rb, line 110</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">availability_options</span>
  [
    [<span class="ruby-identifier">human_attribute_name</span>(<span class="ruby-value">:live</span>), <span class="ruby-keyword">true</span>],
    [<span class="ruby-identifier">human_attribute_name</span>(<span class="ruby-value">:not_live</span>), <span class="ruby-keyword">false</span>]
  ]
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-purpose_options" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">purpose_options</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="purpose_options-source">
            <pre><span class="ruby-comment"># File app/models/product.rb, line 105</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">purpose_options</span>
  <span class="ruby-identifier">purposes</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> [<span class="ruby-constant">Product</span>.<span class="ruby-identifier">human_attribute_value</span>(<span class="ruby-value">:purpose</span>, <span class="ruby-identifier">p</span>), <span class="ruby-identifier">p</span>] }
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-active_promoted_items" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">active_promoted_items</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="active_promoted_items-source">
            <pre><span class="ruby-comment"># File app/models/product.rb, line 162</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">active_promoted_items</span>
  <span class="ruby-identifier">promoted_items</span>.<span class="ruby-identifier">joins</span>(<span class="ruby-value">:promotion</span>).<span class="ruby-identifier">merge</span>(<span class="ruby-constant">Promotion</span>.<span class="ruby-identifier">active</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-available-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">available?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="Product.html">Product</a> is considered available when it&#39;s
live and has shipping inventory, or in case of no inventory, has a defined
lead time.</p>
          
          

          
          <div class="method-source-code" id="available-3F-source">
            <pre><span class="ruby-comment"># File app/models/product.rb, line 238</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">available?</span>
  <span class="ruby-identifier">live?</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">lead_time</span>.<span class="ruby-identifier">present?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">shipping_stock</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-available_variant_options" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">available_variant_options</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="available_variant_options-source">
            <pre><span class="ruby-comment"># File app/models/product.rb, line 246</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">available_variant_options</span>
  <span class="ruby-identifier">store</span>.<span class="ruby-identifier">products</span>.<span class="ruby-identifier">variant</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> [<span class="ruby-identifier">p</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-identifier">p</span>.<span class="ruby-identifier">id</span>] }
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-base_unit" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">base_unit</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the unit (if any) that unit pricing is based on.</p>
          
          

          
          <div class="method-source-code" id="base_unit-source">
            <pre><span class="ruby-comment"># File app/models/product.rb, line 207</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">base_unit</span>
  <span class="ruby-identifier">product_property</span> = <span class="ruby-identifier">unit_pricing_property</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">nil</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">product_property</span>.<span class="ruby-identifier">nil?</span>
  <span class="ruby-identifier">product_property</span>.<span class="ruby-identifier">property</span>.<span class="ruby-identifier">measurement_unit</span>.<span class="ruby-identifier">pricing_base</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-best_promoted_item" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">best_promoted_item</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Finds the promoted item with the lowest quoted price.</p>
          
          

          
          <div class="method-source-code" id="best_promoted_item-source">
            <pre><span class="ruby-comment"># File app/models/product.rb, line 167</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">best_promoted_item</span>
  <span class="ruby-identifier">lowest</span> = <span class="ruby-identifier">active_promoted_items</span>.<span class="ruby-identifier">pluck</span>(<span class="ruby-value">:price_cents</span>).<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">min</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">nil</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">lowest</span>.<span class="ruby-identifier">nil?</span>
  <span class="ruby-identifier">active_promoted_items</span>.<span class="ruby-identifier">find_by</span>(<span class="ruby-identifier">price_cents</span><span class="ruby-operator">:</span> <span class="ruby-identifier">lowest</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-category" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">category</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>If a single category is requested, give the first live one.</p>
          
          

          
          <div class="method-source-code" id="category-source">
            <pre><span class="ruby-comment"># File app/models/product.rb, line 148</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">category</span>
  <span class="ruby-identifier">categories</span>.<span class="ruby-identifier">live</span>.<span class="ruby-identifier">first</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-component_total_price_cents" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">component_total_price_cents</span><span
            class="method-args">(pricing_group)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Total price of components.</p>
          
          

          
          <div class="method-source-code" id="component_total_price_cents-source">
            <pre><span class="ruby-comment"># File app/models/product.rb, line 191</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">component_total_price_cents</span>(<span class="ruby-identifier">pricing_group</span>)
  <span class="ruby-identifier">component_entries</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">entry</span><span class="ruby-operator">|</span> <span class="ruby-identifier">entry</span>.<span class="ruby-identifier">quantity</span> <span class="ruby-operator">*</span> (<span class="ruby-identifier">entry</span>.<span class="ruby-identifier">component</span>.<span class="ruby-identifier">price_cents</span>(<span class="ruby-identifier">pricing_group</span>) <span class="ruby-operator">||</span> <span class="ruby-value">0</span>) }.<span class="ruby-identifier">sum</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-distinct_properties" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">distinct_properties</span><span
            class="method-args">(product)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Finds product properties that differ from the baseline established by given
product. Properties unique to this product are retained.</p>
          
          

          
          <div class="method-source-code" id="distinct_properties-source">
            <pre><span class="ruby-comment"># File app/models/product.rb, line 133</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">distinct_properties</span>(<span class="ruby-identifier">product</span>)
  <span class="ruby-identifier">baseline</span> = <span class="ruby-identifier">product</span>.<span class="ruby-identifier">product_properties_hash</span>
  <span class="ruby-identifier">product_properties</span>.<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">product_property</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">baseline</span>[<span class="ruby-identifier">product_property</span>.<span class="ruby-identifier">property_id</span>] <span class="ruby-operator">!=</span> <span class="ruby-identifier">product_property</span>.<span class="ruby-identifier">value</span>
  }
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-duplicate-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">duplicate!</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Creates a duplicate of this product, including associations.</p>
          
          

          
          <div class="method-source-code" id="duplicate-21-source">
            <pre><span class="ruby-comment"># File app/models/product.rb, line 251</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">duplicate!</span>
  <span class="ruby-identifier">clone</span> = <span class="ruby-identifier">dup</span>.<span class="ruby-identifier">tap</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">c</span>.<span class="ruby-identifier">reset_code</span>
    <span class="ruby-identifier">c</span>.<span class="ruby-identifier">save</span>
    <span class="ruby-identifier">c</span>.<span class="ruby-identifier">update</span>(
      <span class="ruby-identifier">categories</span><span class="ruby-operator">:</span> <span class="ruby-identifier">categories</span>,
      <span class="ruby-identifier">variants</span><span class="ruby-operator">:</span> <span class="ruby-identifier">variants</span>,
      <span class="ruby-identifier">component_products</span><span class="ruby-operator">:</span> <span class="ruby-identifier">component_products</span>,
      <span class="ruby-identifier">requisite_products</span><span class="ruby-operator">:</span> <span class="ruby-identifier">requisite_products</span>,
      <span class="ruby-identifier">iframes</span><span class="ruby-operator">:</span> <span class="ruby-identifier">iframes</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:dup</span>),
      <span class="ruby-identifier">alternate_prices</span><span class="ruby-operator">:</span> <span class="ruby-identifier">alternate_prices</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:dup</span>),
      <span class="ruby-identifier">product_properties</span><span class="ruby-operator">:</span> <span class="ruby-identifier">product_properties</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:dup</span>)
    )
    <span class="ruby-identifier">images</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">image</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">c</span>.<span class="ruby-identifier">images</span>.<span class="ruby-identifier">create</span>(
        <span class="ruby-identifier">priority</span><span class="ruby-operator">:</span> <span class="ruby-identifier">image</span>.<span class="ruby-identifier">priority</span>,
        <span class="ruby-identifier">purpose</span><span class="ruby-operator">:</span> <span class="ruby-identifier">image</span>.<span class="ruby-identifier">purpose</span>,
        <span class="ruby-identifier">attachment</span><span class="ruby-operator">:</span> <span class="ruby-identifier">image</span>.<span class="ruby-identifier">attachment</span>
      )
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-first_variant" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">first_variant</span><span
            class="method-args">(category)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Finds the first variant for this product in the scope of given category.
Returns self if not a master product or there are no variants.</p>
          
          

          
          <div class="method-source-code" id="first_variant-source">
            <pre><span class="ruby-comment"># File app/models/product.rb, line 123</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">first_variant</span>(<span class="ruby-identifier">category</span>)
  <span class="ruby-identifier">master?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">variants</span>.<span class="ruby-identifier">sorted</span>(<span class="ruby-identifier">category</span>.<span class="ruby-identifier">product_scope</span>).<span class="ruby-identifier">first</span> <span class="ruby-operator">||</span> <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-icon" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">icon</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Icon name based on purpose.</p>
          
          

          
          <div class="method-source-code" id="icon-source">
            <pre><span class="ruby-comment"># File app/models/product.rb, line 292</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">icon</span>
  <span class="ruby-constant">PURPOSE_ICONS</span>[<span class="ruby-constant">Product</span>.<span class="ruby-identifier">purposes</span>[<span class="ruby-identifier">purpose</span>]]
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-limelightable-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">limelightable?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Limelighting a product in portal views needs both images and text.</p>
          
          

          
          <div class="method-source-code" id="limelightable-3F-source">
            <pre><span class="ruby-comment"># File app/models/product.rb, line 287</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">limelightable?</span>
  <span class="ruby-identifier">cover_image</span>.<span class="ruby-identifier">present?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">description</span>.<span class="ruby-identifier">present?</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-margin_percent" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">margin_percent</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Margin percentage from trade price to retail price.</p>
          
          

          
          <div class="method-source-code" id="margin_percent-source">
            <pre><span class="ruby-comment"># File app/models/product.rb, line 226</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">margin_percent</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">nil</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">trade_price</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">retail_price</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">retail_price</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
  <span class="ruby-value">100</span> <span class="ruby-operator">*</span> (<span class="ruby-identifier">retail_price</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">trade_price</span>) <span class="ruby-operator">/</span> <span class="ruby-identifier">retail_price</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-markup_percent" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">markup_percent</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Markup percentage from trade price to retail price.</p>
          
          

          
          <div class="method-source-code" id="markup_percent-source">
            <pre><span class="ruby-comment"># File app/models/product.rb, line 220</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">markup_percent</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">nil</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">trade_price</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">retail_price</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">trade_price</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
  <span class="ruby-value">100</span> <span class="ruby-operator">*</span> (<span class="ruby-identifier">retail_price</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">trade_price</span>) <span class="ruby-operator">/</span> <span class="ruby-identifier">trade_price</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-master_product_options" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">master_product_options</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="master_product_options-source">
            <pre><span class="ruby-comment"># File app/models/product.rb, line 242</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">master_product_options</span>
  <span class="ruby-identifier">store</span>.<span class="ruby-identifier">products</span>.<span class="ruby-identifier">master</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> [<span class="ruby-identifier">p</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-identifier">p</span>.<span class="ruby-identifier">id</span>] }
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-price_cents" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">price_cents</span><span
            class="method-args">(pricing_group)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the retail price in given pricing group. If no group is specified,
finds the lowest retail price through promotions. Bundles sum their
components if no price is specified. Composites add their components.</p>
          
          

          
          <div class="method-source-code" id="price_cents-source">
            <pre><span class="ruby-comment"># File app/models/product.rb, line 176</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">price_cents</span>(<span class="ruby-identifier">pricing_group</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">bundle?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">retail_price_cents</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">component_total_price_cents</span>(<span class="ruby-identifier">pricing_group</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">pricing_group</span>.<span class="ruby-identifier">present?</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">alternate_prices</span>.<span class="ruby-identifier">find_by</span>(<span class="ruby-identifier">pricing_group</span><span class="ruby-operator">:</span> <span class="ruby-identifier">pricing_group</span>).<span class="ruby-identifier">try</span>(<span class="ruby-value">:retail_price_cents</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">retail_price_cents</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">price_cents</span> = <span class="ruby-identifier">retail_price_cents</span>
  <span class="ruby-identifier">lowest</span> = <span class="ruby-identifier">best_promoted_item</span>
  <span class="ruby-identifier">price_cents</span> = <span class="ruby-identifier">lowest</span>.<span class="ruby-identifier">price_cents</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">lowest</span>.<span class="ruby-identifier">present?</span>
  <span class="ruby-identifier">price_cents</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">component_total_price_cents</span>(<span class="ruby-identifier">pricing_group</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">composite?</span>
  <span class="ruby-identifier">price_cents</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-price_range" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">price_range</span><span
            class="method-args">(pricing_group)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the range of retail prices across variants of a master product.</p>
          
          

          
          <div class="method-source-code" id="price_range-source">
            <pre><span class="ruby-comment"># File app/models/product.rb, line 214</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">price_range</span>(<span class="ruby-identifier">pricing_group</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">nil</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">master?</span>
  <span class="ruby-identifier">variants</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">variant</span><span class="ruby-operator">|</span> <span class="ruby-identifier">variant</span>.<span class="ruby-identifier">price</span>(<span class="ruby-identifier">pricing_group</span>) }.<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">minmax</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-product_properties_hash" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">product_properties_hash</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Assigned product properties as a hash keyed by property id. Useful for
comparison, see <a
href="Product.html#method-i-distinct_properties">distinct_properties</a>.</p>
          
          

          
          <div class="method-source-code" id="product_properties_hash-source">
            <pre><span class="ruby-comment"># File app/models/product.rb, line 158</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">product_properties_hash</span>
  <span class="ruby-identifier">product_properties</span>.<span class="ruby-identifier">pluck</span>(<span class="ruby-value">:property_id</span>, <span class="ruby-value">:value</span>).<span class="ruby-identifier">to_h</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-real-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">real?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="real-3F-source">
            <pre><span class="ruby-comment"># File app/models/product.rb, line 118</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">real?</span>; <span class="ruby-operator">!</span><span class="ruby-identifier">virtual?</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-reset_live_status-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">reset_live_status!</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Resets the live status of the product, according to these criteria:</p>
<ul><li>
<p>must have at least one live category</p>
</li><li>
<p>set to be available at a certain date which is not in the future</p>
</li><li>
<p>if set to be deleted at a certain date which is in the future</p>
</li></ul>
          
          

          
          <div class="method-source-code" id="reset_live_status-21-source">
            <pre><span class="ruby-comment"># File app/models/product.rb, line 304</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">reset_live_status!</span>
  <span class="ruby-identifier">update_columns</span>(<span class="ruby-identifier">live</span><span class="ruby-operator">:</span> <span class="ruby-identifier">categories</span>.<span class="ruby-identifier">live</span>.<span class="ruby-identifier">any?</span> <span class="ruby-operator">&amp;&amp;</span>
    (<span class="ruby-identifier">available_at</span>.<span class="ruby-identifier">present?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">available_at</span>.<span class="ruby-identifier">future?</span>) <span class="ruby-operator">&amp;&amp;</span>
    (<span class="ruby-identifier">deleted_at</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">deleted_at</span>.<span class="ruby-identifier">future?</span>))
  <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-searchable_product_properties" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">searchable_product_properties</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="searchable_product_properties-source">
            <pre><span class="ruby-comment"># File app/models/product.rb, line 152</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">searchable_product_properties</span>
  <span class="ruby-identifier">product_properties</span>.<span class="ruby-identifier">joins</span>(<span class="ruby-value">:property</span>).<span class="ruby-identifier">merge</span>(<span class="ruby-constant">Property</span>.<span class="ruby-identifier">searchable</span>).<span class="ruby-identifier">merge</span>(<span class="ruby-constant">Property</span>.<span class="ruby-identifier">sorted</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-shipping_stock" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">shipping_stock</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Sum of stock in shipping inventories.</p>
          
          

          
          <div class="method-source-code" id="shipping_stock-source">
            <pre><span class="ruby-comment"># File app/models/product.rb, line 232</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">shipping_stock</span>
  <span class="ruby-identifier">inventory_items</span>.<span class="ruby-identifier">shipping</span>.<span class="ruby-identifier">pluck</span>(<span class="ruby-value">:amount</span>).<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">sum</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-should_generate_new_friendly_id-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">should_generate_new_friendly_id?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          
            <div class="method-calls-super">
              Calls superclass method
              
            </div>
          

          
          <div class="method-source-code" id="should_generate_new_friendly_id-3F-source">
            <pre><span class="ruby-comment"># File app/models/product.rb, line 278</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">should_generate_new_friendly_id?</span>
  (<span class="ruby-identifier">title_changed?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">subtitle_changed?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">code_changed?</span>) <span class="ruby-operator">||</span> <span class="ruby-keyword">super</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-sibling_variants" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">sibling_variants</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="sibling_variants-source">
            <pre><span class="ruby-comment"># File app/models/product.rb, line 127</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">sibling_variants</span>
  <span class="ruby-identifier">master_product</span>.<span class="ruby-identifier">variants</span>.<span class="ruby-identifier">where</span>.<span class="ruby-identifier">not</span>(<span class="ruby-identifier">id</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-slugger" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">slugger</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="slugger-source">
            <pre><span class="ruby-comment"># File app/models/product.rb, line 274</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">slugger</span>
  [[<span class="ruby-value">:title</span>, <span class="ruby-value">:subtitle</span>, <span class="ruby-value">:code</span>], [<span class="ruby-value">:title</span>, <span class="ruby-value">:subtitle</span>, <span class="ruby-value">:code</span>, <span class="ruby-operator">-</span><span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">store</span>.<span class="ruby-identifier">name</span> }]]
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-to_s" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_s</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="to_s-source">
            <pre><span class="ruby-comment"># File app/models/product.rb, line 296</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_s</span>
  <span class="ruby-node">&quot;#{title} #{subtitle}&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-undead-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">undead?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="undead-3F-source">
            <pre><span class="ruby-comment"># File app/models/product.rb, line 119</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">undead?</span>; <span class="ruby-operator">!</span><span class="ruby-identifier">live?</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-unique_properties" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">unique_properties</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Finds the set of unique properties across all variants of a master product.
Returns a hash keyed by property, or an empty set if not a master product.</p>
          
          

          
          <div class="method-source-code" id="unique_properties-source">
            <pre><span class="ruby-comment"># File app/models/product.rb, line 142</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">unique_properties</span>
  <span class="ruby-keyword">return</span> [] <span class="ruby-keyword">unless</span> <span class="ruby-identifier">master?</span>
  <span class="ruby-identifier">variants</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:product_properties</span>).<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">group_by</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:property</span>).<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span>, <span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">v</span>.<span class="ruby-identifier">uniq</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:value</span>).<span class="ruby-identifier">count</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span> }
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-unit_price_cents" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">unit_price_cents</span><span
            class="method-args">(total_cents)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Calculates unit price from given total cents by finding a product property
that declares unit pricing.</p>
          
          

          
          <div class="method-source-code" id="unit_price_cents-source">
            <pre><span class="ruby-comment"># File app/models/product.rb, line 197</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">unit_price_cents</span>(<span class="ruby-identifier">total_cents</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">nil</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">total_cents</span>.<span class="ruby-identifier">nil?</span>
  <span class="ruby-identifier">product_property</span> = <span class="ruby-identifier">unit_pricing_property</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">nil</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">product_property</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">product_property</span>.<span class="ruby-identifier">value</span>.<span class="ruby-identifier">nil?</span>
  <span class="ruby-identifier">measure</span> = <span class="ruby-identifier">product_property</span>.<span class="ruby-identifier">value</span>.<span class="ruby-identifier">tr</span>(<span class="ruby-string">&#39;,&#39;</span>, <span class="ruby-string">&#39;.&#39;</span>).<span class="ruby-identifier">to_f</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">nil</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">measure</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
  <span class="ruby-identifier">total_cents</span> <span class="ruby-operator">/</span> (<span class="ruby-identifier">measure</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">product_property</span>.<span class="ruby-identifier">property</span>.<span class="ruby-identifier">measurement_unit</span>.<span class="ruby-identifier">factor</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-with_requisite_products" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">with_requisite_products</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="with_requisite_products-source">
            <pre><span class="ruby-comment"># File app/models/product.rb, line 282</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">with_requisite_products</span>
  [<span class="ruby-keyword">self</span>] <span class="ruby-operator">+</span> <span class="ruby-identifier">requisite_products</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="protected-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Protected Instance Methods</h3>
       </header>

    
      <div id="method-i-reset_code" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">reset_code</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Adds an incrementing branch number to the product code.</p>
          
          

          
          <div class="method-source-code" id="reset_code-source">
            <pre><span class="ruby-comment"># File app/models/product.rb, line 321</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">reset_code</span>
  <span class="ruby-keyword">while</span> <span class="ruby-operator">!</span><span class="ruby-identifier">valid?</span>
    <span class="ruby-identifier">trunk</span>, <span class="ruby-identifier">branch</span> = <span class="ruby-identifier">code</span>.<span class="ruby-identifier">partition</span>(<span class="ruby-regexp">/ \(\d+\)/</span>)
    <span class="ruby-identifier">branch</span> = <span class="ruby-string">&#39; (0)&#39;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">branch</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-keyword">self</span>[<span class="ruby-value">:code</span>] = <span class="ruby-node">&quot;#{trunk}#{branch.succ}&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-reset_itself-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">reset_itself!</span><span
            class="method-args">(category)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="reset_itself-21-source">
            <pre><span class="ruby-comment"># File app/models/product.rb, line 312</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">reset_itself!</span>(<span class="ruby-identifier">category</span>)
  <span class="ruby-identifier">reset_live_status!</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">persisted?</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-touch_categories" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">touch_categories</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="touch_categories-source">
            <pre><span class="ruby-comment"># File app/models/product.rb, line 316</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">touch_categories</span>
  <span class="ruby-identifier">categories</span>.<span class="ruby-identifier">each</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:touch</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://docs.seattlerb.org/rdoc/">RDoc</a> 4.2.2.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

