.segment-content.picture
  - if picture.images.any?
    - if picture.images.count > 1
      .swiper-container
        .swiper-wrapper
          - picture.images.each do |image|
            .swiper-slide
              = image_variant_tag image, :lightbox

      :coffee
        jQuery ->
          $swiper = new Swiper $("##{dom_id(picture)} .swiper-container"),
            autoplay: 5000
            loop: true
            effect: 'fade'
    - else
      .image-container
        = image_variant_tag picture.cover_image, :lightbox

  - else
    :coffee
      # Responsive placeholder image technology from
      # <https://codepen.io/shshaw/post/responsive-placeholder-image>
      iconSVG = """
        <svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 {{w}} {{h}}'><defs><symbol id='a' viewBox='0 0 90 66' opacity='0.3'><path d='M85 5v56H5V5h80m5-5H0v66h90V0z'/><circle cx='18' cy='20' r='6'/><path d='M56 14L37 39l-8-6-17 23h67z'/></symbol></defs><use xlink:href='#a' width='20%' x='40%'/></svg>
        """
      $segment = $("##{dom_id(picture)}")
      $placeholder = $('<img>', {src: "data:image/svg+xml;charset=utf-8," + encodeURIComponent(iconSVG.replace(/{{w}}/g, $segment.width()).replace(/{{h}}/g, 0.5625 * $segment.width()))})
      $segment.find('.segment-content').html $placeholder
