/*!
 * froala_editor v2.2.0 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms
 * Copyright 2014-2016 Froala Labs
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){"use strict";e.extend(e.FE.DEFAULTS,{dragInline:!0}),e.FE.PLUGINS.draggable=function(t){function n(n){return e(n.target).hasClass("fr-draggable")?(e(n.target).addClass("fr-dragging"),t.opts.dragInline?t.$el.attr("contenteditable",!0):t.$el.attr("contenteditable",!1),t.opts.toolbarInline&&t.toolbar.hide(),t.undo.canDo()||t.undo.saveStep(),t.browser.msie||t.browser.edge||t.selection.clear(),void n.originalEvent.dataTransfer.setData("text","Froala")):(n.preventDefault(),!1)}function a(e){return!(e&&("HTML"==e.tagName||"BODY"==e.tagName||t.node.isElement(e)))}function r(e,n,a){t.opts.iframe&&(e+=t.$iframe.offset().top,n+=t.$iframe.offset().left),d.offset().top!=e&&d.css("top",e),d.offset().left!=n&&d.css("left",n),d.width()!=a&&d.css("width",a)}function o(n){var o=t.doc.elementFromPoint(n.originalEvent.pageX-t.win.pageXOffset,n.originalEvent.pageY-t.win.pageYOffset);if(!a(o)){for(var i=0,f=o;!a(f)&&f==o&&n.originalEvent.pageY-t.win.pageYOffset-i>0;)i++,f=t.doc.elementFromPoint(n.originalEvent.pageX-t.win.pageXOffset,n.originalEvent.pageY-t.win.pageYOffset-i);(!a(f)||0===t.$el.find(f).length&&f!=d.get(0))&&(f=null);for(var s=0,l=o;!a(l)&&l==o&&n.originalEvent.pageY-t.win.pageYOffset+s<e(t.doc).height();)s++,l=t.doc.elementFromPoint(n.originalEvent.pageX-t.win.pageXOffset,n.originalEvent.pageY-t.win.pageYOffset+s);(!a(l)||0===t.$el.find(l).length&&l!=d.get(0))&&(l=null),o=null==l&&f?f:l&&null==f?l:l&&f?s>i?f:l:null}if(e(o).hasClass("fr-drag-helper"))return!1;if(o&&!t.node.isBlock(o)&&(o=t.node.blockParent(o)),o&&["TD","TH","TR","THEAD","TBODY"].indexOf(o.tagName)>=0&&(o=e(o).parents("table").get(0)),o&&["LI"].indexOf(o.tagName)>=0&&(o=e(o).parents("UL, OL").get(0)),o&&!e(o).hasClass("fr-drag-helper")){d||(e.FE.$draggable_helper||(e.FE.$draggable_helper=e('<div class="fr-drag-helper"></div>')),d=e.FE.$draggable_helper,t.events.on("shared.destroy",function(){d.html("").removeData().remove()},!0));var g,p=n.originalEvent.pageY;g=p<e(o).offset().top+e(o).outerHeight()/2?!0:!1;var v=e(o),u=0;g||0!==v.next().length?(g||(v=v.next()),"before"==d.data("fr-position")&&v.is(d.data("fr-tag"))||(v.prev().length>0&&(u=parseFloat(v.prev().css("margin-bottom"))||0),u=Math.max(u,parseFloat(v.css("margin-top"))||0),r(v.offset().top-u/2-t.$box.offset().top,v.offset().left-t.win.pageXOffset-t.$box.offset().left,v.width()),d.data("fr-position","before"))):"after"==d.data("fr-position")&&v.is(d.data("fr-tag"))||(u=parseFloat(v.css("margin-bottom"))||0,r(v.offset().top+e(o).height()+u/2-t.$box.offset().top,v.offset().left-t.win.pageXOffset-t.$box.offset().left,v.width()),d.data("fr-position","after")),d.data("fr-tag",v),d.addClass("fr-visible"),d.appendTo(t.$box)}else d&&t.$box.find(d).length>0&&d.removeClass("fr-visible")}function i(e){e.originalEvent.dataTransfer.dropEffect="move",t.opts.dragInline||(e.preventDefault(),o(e))}function f(e){e.originalEvent.dataTransfer.dropEffect="move",t.opts.dragInline||e.preventDefault()}function s(e){t.$el.attr("contenteditable",!0);var n=t.$el.find(".fr-dragging");d&&d.hasClass("fr-visible")&&t.$box.find(d).length?l(e):n.length&&(e.preventDefault(),e.stopPropagation(),d&&!d.hasClass("fr-visible")&&n.removeClass("fr-dragging"))}function l(n){for(var a,r,o=0;o<e.FE.INSTANCES.length;o++)if(a=e.FE.INSTANCES[o].$el.find(".fr-dragging"),a.length){r=e.FE.INSTANCES[o];break}if(a.length){if(n.preventDefault(),n.stopPropagation(),d&&d.hasClass("fr-visible")&&t.$box.find(d).length)d.data("fr-tag")[d.data("fr-position")]('<span class="fr-marker"></span>'),d.removeClass("fr-visible");else{var i=t.markers.insertAtPoint(n.originalEvent);if(i===!1)return!1}if(t.popups.hideAll(),r==t||t.undo.canDo()||t.undo.saveStep(),t.core.isEmpty())t.$el.html(a);else{var f=t.$el.find(".fr-marker");f.replaceWith(a),a.after(e.FE.MARKERS),t.selection.restore()}return a.removeClass("fr-dragging"),t.$el.find(t.html.emptyBlockTagsQuery()).remove(),t.html.wrap(),t.undo.saveStep(),r!=t&&(r.popups.hideAll(),r.$el.find(t.html.emptyBlockTagsQuery()).remove(),r.html.wrap(),r.undo.saveStep(),r.events.trigger("element.dropped")),t.opts.iframe&&t.size.syncIframe(),t.events.trigger("element.dropped",[a]),!1}}function g(){t.opts.enter==e.FE.ENTER_BR&&(t.opts.dragInline=!0),t.events.on("dragstart",n,!0),t.events.on("dragover",i,!0),t.events.on("dragenter",f,!0),t.events.on("document.dragend",s,!0),t.events.on("document.drop",s,!0),t.events.on("drop",l,!0),t.events.on("html.get",function(e){return e=e.replace(/<(div)((?:[\w\W]*?))class="([\w\W]*?)fr-drag-helper([\w\W]*?)"((?:[\w\W]*?))>((?:[\w\W]*?))<\/(div)>/g,"")})}var d;return{_init:g}}});