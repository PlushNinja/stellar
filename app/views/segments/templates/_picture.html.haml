- has_pictures = picture.pictures.any?
- swiper = picture.pictures.count > 1
- sizing = picture.image_sizing

.segment-content.picture{id: dom_id(picture)}
  - if has_pictures
    - if swiper
      .swiper-container{class: sizing}
        .swiper-wrapper
          - picture.pictures.each do |picture|
            .swiper-slide
              = picture_variant_tag picture, :lightbox
    - else
      .image-container{class: sizing}
        - if picture.url.present?
          = link_to picture.url do
            = picture_variant_tag picture.cover_picture, :lightbox
        - else
          = picture_variant_tag picture.cover_picture, :lightbox

  - else
    = render partial: 'segments/placeholders/picture'

- if swiper
  :coffee
    jQuery ->
      $segment = $('##{dom_id(picture)}')
      new Swiper $segment.find('.swiper-container'),
        autoplay:
          delay: 5000
        loop: true
        effect: 'fade'
