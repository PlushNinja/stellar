%canvas#sales-chart

:coffee
  moment.locale '#{I18n.locale}'
  $ctx = $('#sales-chart')
  $.ajax
    url: '#{admin_sales_report_path(format: :json, variant: :chart)}'
    dataType: 'json'
  .done (data) ->
    chart = new Chart $ctx,
      type: 'bar'
      data:
        datasets: [
          {
            yAxisID: 'value'
            label: '#{j I18n.t("admin.reports.sales.chart.value")}'
            data: data.daily_value
            type: 'line'
            cubicInterpolationMode: 'monotone'
            fill: false
          }
          {
            yAxisID: 'items'
            label: '#{j I18n.t("admin.reports.sales.chart.units")}'
            data: data.daily_units
          }
        ]
      options:
        scales:
          xAxes: [
            {
              type: 'time'
              time: {unit: 'week'}
              gridLines: {display: false}
            }
          ]
          yAxes: [
            {
              id: 'value'
            }
            {
              id: 'items'
              position: 'right'
              gridLines: {display: false}
            }
          ]
