- cache [current_group, I18n.locale, :product_card, product] do
  = content_tag_for :li, product, class: 'masonry-item single' do
    = link_to show_product_path(product, @category), data: {push: 'partial', target: '#store-body'} do
      .product-image= image_variant_tag product.cover_image(current_store.card_image_type), :postcard
      .product-text
        %h3
          = product.title
          %span.small= product.subtitle
        .description= product.description
      .promotions
        - product.live_promoted_items(current_group).each do |item|
          .promotion= item.description
    .buy-now
      %p.price.currency
        - if can_see_pricing?
          - if product.has_variants?
            = price_range *pricing.range_for_display(product)
          - else
            = price_tag *pricing.for_display(product)
      - if can_shop? && may_shop_at?(@category) && product.purchasable?
        - if product.out_of_stock?(current_inventory) && !product.back_orderable?
          %p.text-danger
            = icon('exclamation-circle')
            = col(Product, :out_of_stock)
        - if product.orderable?(current_inventory)
          = form_tag order_product_path(product), method: :post, remote: true, class: 'form-inline buy-now-form' do
            = hidden_field_tag :amount, 1
            %button.btn.btn-success.btn-sm{type: 'submit'}= icon('cart-plus')
