- id = dom_id(pictureable, :pictures)
- grid_columns ||= 3

%p.new-picture
  = link_to [:new, :admin, pictureable, :picture], remote: true, class: 'btn btn-primary btn-block' do
    = icon('plus', t('.new'))

.grid.thumbnail-grid.sortable{id: id, class: "grid-columns-#{grid_columns}"}
  = render partial: 'admin/pictures/edit', collection: pictureable.pictures, as: :picture

:coffee
  $('##{id}').sortable(
    items: '> .grid-item'
    handle: '.thumbnail'
    placeholder: 'grid-item'
    helper: 'clone'
    opacity: 0.5
    revert: 200
  ).bind 'sortupdate', (e, ui) ->
    $.post '#{admin_reorder_pictures_path}',
      {reorder: $(this).sortable('toArray')},
      (data, status, xhr) ->
        $(document).trigger 'pictureable:reordered'
